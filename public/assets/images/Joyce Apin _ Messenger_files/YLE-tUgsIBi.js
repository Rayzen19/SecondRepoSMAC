;/*FB_PKG_DELIM*/

__d("FDSShareFilled20Icon",["cr:15639"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:15639")}),98);
__d("FDSShareFilled20PNGIcon.react",["ix","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";a=d("fbicon")._(h("484396"),20);b=a;g["default"]=b}),98);
__d("useMAWBulkMaybeAutoTriggerDownload",["MAWDownloadMediaInWorkerDeferred","MAWMediaDownloadStatus","MAWMediaManagerUiIntegrationCheck","react","react-compiler-runtime","useAsyncReStore","useMAWMediaDownloadStatusBulk"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect;b.useMemo;var j=b.useRef;function a(a,b,e,f){var g=d("react-compiler-runtime").c(13);f=c("useMAWMediaDownloadStatusBulk")(a,f);f=f.mawMediaStatuses;var h;g[0]===Symbol["for"]("react.memo_cache_sentinel")?(h=[c("MAWMediaDownloadStatus").MISSING_FILE,c("MAWMediaDownloadStatus").MANUAL_RETRYABLE_FAILURE,c("MAWMediaDownloadStatus").DOWNLOADING].filter(Boolean),g[0]=h):h=g[0];var k=h;g[1]!==a||g[2]!==e||g[3]!==f?(h=new Map(f==null?void 0:f.map(function(b,c){var f=(!d("MAWMediaManagerUiIntegrationCheck").getIsMediaManagerUiIntegrationEnabled()||e==null||e==="fullsize"||e==="fullsizeAndPreview")&&k.includes(b==null?void 0:b.mainMediaStatus);b=d("MAWMediaManagerUiIntegrationCheck").getIsMediaManagerUiIntegrationEnabled()&&e==="preview"&&k.includes(b==null?void 0:b.previewMediaStatus);b=b||f;return[a[c].attachment.attachmentFbid,b]})),g[1]=a,g[2]=e,g[3]=f,g[4]=h):h=g[4];f=h;var l=f;g[5]===Symbol["for"]("react.memo_cache_sentinel")?(h=new Map(),g[5]=h):h=g[5];var m=j(h),n=c("useAsyncReStore")();g[6]!==a||g[7]!==n||g[8]!==e||g[9]!==l||g[10]!==b?(f=function(){var c=[];a.forEach(function(a){var b,d,e=a.attachment;a=a.mediaRenderQpl;b=(b=l.get(e.attachmentFbid))!=null?b:!1;d=(d=m.current.get(e.attachmentFbid))!=null?d:!1;b&&!d&&(m.current.set(e.attachmentFbid,!0),c.push({attachment:e,mediaRenderQpl:a}))});c.length>0&&d("MAWDownloadMediaInWorkerDeferred").maybeBulkDownloadMediaInWorker({attachmentsWithQpl:c,dbPromise:n,downloadType:e,triggerUIView:b})},h=[a,n,e,m,l,b],g[6]=a,g[7]=n,g[8]=e,g[9]=l,g[10]=b,g[11]=f,g[12]=h):(f=g[11],h=g[12]);i(f,h)}g["default"]=a}),98);
__d("MWChatAttachmentMediaState.react",["$InternalEnum","I64","LSIntEnum","MAWClientMediaStatusUtils","MAWMediaManagerUiIntegrationCheck","MAWVideoAudioPlaybackErrorHandlerUtils","MessagingAttachmentType","RavenMessagingState","filterNulls","gkx","react","useClientMediaStatus","useMAWBulkMaybeAutoTriggerDownload","usePrevious"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||(h=d("react"));e=h;var l=e.createContext,m=e.useEffect,n=e.useMemo,o=e.useState,p=b("$InternalEnum")({Image:0,Video:1,AnimatedImage:2}),q=l({canMoveBackward:!1,canMoveForward:!1,card:void 0,cards:[],currentIndex:0,isImageExpanded:!1,moveBackward:function(){},moveForward:function(){},moveTo:function(){},numberOfCards:0,setIsImageExpanded:function(){},shouldTriggerLoadMore:!1});function r(a){var b=a.attachmentType;a=a.ephemeralMediaState;return a!=null&&(i||(i=d("I64"))).equal(b,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").EPHEMERAL_IMAGE))&&(i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("RavenMessagingState").PERMANENT))}function s(a){var b=a.attachmentType;a=a.ephemeralMediaState;return a!=null&&(i||(i=d("I64"))).equal(b,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").EPHEMERAL_VIDEO))&&(i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("RavenMessagingState").PERMANENT))}function t(a,b,c,d){return c?d.hasMedia:b(d,"isPlayableMedia")!=null&&a(d,"isPlayableMedia")!=null}function u(a,b,e,f){var g=f.attachmentType;return!t(a,b,e,f)?!1:r(f)||(i||(i=d("I64"))).equal(g,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE))}function v(a,b,e,f,g){var h=f.attachmentFbid,k=f.attachmentType,l=!1,m=!1;g=d("MAWClientMediaStatusUtils").getStatusDataFromLsdb({clientMediaStatus:g,statusKey:h});h=g.hasStatus;g=g.statusData;if(h&&!c("gkx")("17009")){h=g!=null?g:{};g=h.validationResult;l=g!=null?d("MAWVideoAudioPlaybackErrorHandlerUtils").isInvalidVideo(f,g):!1;m=g!=null?d("MAWVideoAudioPlaybackErrorHandlerUtils").isUnsupportedVideo(f,g):!1}return!t(a,b,e,f)||l||m?!1:s(f)||(i||(i=d("I64"))).equal(k,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO))}function w(a,b){m(function(){a.forEach(function(a){try{a.attachment.hasMedia&&!(i||(i=d("I64"))).equal(a.attachment.attachmentType,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE))&&b(a.attachment,"usePreloadThumbnails");return}catch(a){return}})},[a,b])}function a(a){var b=a.attachments,e=a.children,f=a.getIsSecureThread,g=a.getPlayableUrl,h=a.getPreviewUrl;a=a.initialAttachment;a=o(a);var i=a[0],j=a[1];a=o(!1);var l=a[0],m=a[1];a=c("usePrevious")(i==null?void 0:i.messageId);var r=n(function(){return b.map(function(a){return{attachment:a,mediaRenderQpl:null,statusKey:a.attachmentFbid}})},[b]),s=c("useClientMediaStatus")(r),t=n(function(){return i!=null&&d("MAWMediaManagerUiIntegrationCheck").getIsMediaManagerUiIntegrationEnabled()?[{attachment:i,mediaRenderQpl:null,statusKey:i.attachmentFbid}]:[]},[i]);c("useMAWBulkMaybeAutoTriggerDownload")(r,"fullsize","preview",s);c("useMAWBulkMaybeAutoTriggerDownload")(t,"fullsize","fullsizeAndPreview",s);var x=n(function(){return c("filterNulls")(b.map(function(a){var b=f(a);if(u(g,h,b,a))return{attachment:a,type:p.Image};return v(g,h,b,a,s)?{attachment:a,type:p.Video}:null}))},[b,s,f,g,h]),y=i==null?-1:x.findIndex(function(a){return a.attachment.attachmentFbid===i.attachmentFbid&&a.attachment.messageId===i.messageId}),z=a!=null&&(i==null?void 0:i.messageId)!==a&&y>x.length-5;w(x,h);r=n(function(){var a=Math.max(0,x.length-1);return{canMoveBackward:y>0&&y!==-1,canMoveForward:y<a&&y!==-1,card:x[y],cards:x,currentIndex:y,isImageExpanded:l,moveBackward:function(){var a=Math.max(y-1,0);j((a=x[a])==null?void 0:a.attachment)},moveForward:function(){var b=Math.min(y+1,a);j((b=x[b])==null?void 0:b.attachment)},moveTo:function(a){j(a.attachment)},numberOfCards:x.length,setIsImageExpanded:m,shouldTriggerLoadMore:z}},[x,y,z,l]);return k.jsx(q.Provider,{value:r,children:e})}a.displayName=a.name+" [from "+f.id+"]";g.AttachmentMediaType=p;g.context=q;g.MWChatAttachmentMediaStateProviderFromAttachments=a}),98);
__d("MWChatAttachmentMediaNavigationHotkeys.react",["fbt","CometKeys","MWChatAttachmentMediaState.react","justknobx","react","react-compiler-runtime","useLayerKeyCommands"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useContext;b.useMemo;var l={key:c("CometKeys").LEFT},m={key:c("CometKeys").RIGHT},n={key:c("CometKeys").ESCAPE},o=h._(/*BTDS*/"Next item"),p=h._(/*BTDS*/"Previous item"),q=h._(/*BTDS*/"Close");function a(a){var b=d("react-compiler-runtime").c(18),e=a.children,f=a.onClose;a=k(d("MWChatAttachmentMediaState.react").context);var g=a.isImageExpanded,h=a.moveBackward,i=a.moveForward,r=a.setIsImageExpanded;b[0]!==g||b[1]!==h?(a={command:l,description:o,handler:function(){g||h()}},b[0]=g,b[1]=h,b[2]=a):a=b[2];var s;b[3]!==g||b[4]!==i?(s={command:m,description:p,handler:function(){g||i()}},b[3]=g,b[4]=i,b[5]=s):s=b[5];var t;b[6]!==g||b[7]!==f||b[8]!==r?(t=f!=null?{command:n,description:q,handler:function(){if(g)return r(!1);f()}}:null,b[6]=g,b[7]=f,b[8]=r,b[9]=t):t=b[9];var u;b[10]!==a||b[11]!==s||b[12]!==t?(u=[a,s,t],b[10]=a,b[11]=s,b[12]=t,b[13]=u):u=b[13];a=u;b[14]!==a?(s=a.filter(Boolean),b[14]=a,b[15]=s):s=b[15];t=s;u=t;c("useLayerKeyCommands")(u);b[16]!==e?(a=c("justknobx")._("3491")?j.jsx(j.Fragment,{children:e!=null?e:null}):j.jsx("div",{children:e!=null?e:null}),b[16]=e,b[17]=a):a=b[17];return a}g.keyLeft=l;g.keyRight=m;g.keyEscape=n;g.MWChatAttachmentMediaNavigationHotkeys=a}),226);
__d("MWChatAttachmentMediaUtils",["MWChatAttachmentMediaState.react"],(function(a,b,c,d,e,f,g){"use strict";var h="/images/comet/gray.png";function a(a){var b=a.card,c=a.getPlayableUrl;a=a.getPreviewUrl;var e=b.attachment,f;if(e.hasMedia)try{f=a(e,"toFilmstripThumbnail")}catch(a){f=null}a=f;if(b.type===d("MWChatAttachmentMediaState.react").AttachmentMediaType.Video&&f==null)try{a=c(e,"toFilmstripThumbnail")}catch(b){a=null}if(b.type===d("MWChatAttachmentMediaState.react").AttachmentMediaType.Image){return{alt:(c=e.accessibilitySummaryText)!=null?c:"",backgroundColor:void 0,height:0,isUseImageResizing:void 0,mediaType:"image",uri:f!=null?f:h,width:0}}return{height:0,mediaType:"video",thumbnailUri:f!=null?f:h,uri:a!=null?a:h,width:0}}function b(a){var b=a.card,c=a.getPlayableUrl;a=a.getPreviewUrl;var e=b.attachment,f;e.hasMedia&&(f=a(e,"toFilmstripThumbnailSuspends"));a=f;b.type===d("MWChatAttachmentMediaState.react").AttachmentMediaType.Video&&f==null&&(a=c(e,"toFilmstripThumbnailSuspends"));if(b.type===d("MWChatAttachmentMediaState.react").AttachmentMediaType.Image){return{alt:(c=e.accessibilitySummaryText)!=null?c:"",backgroundColor:void 0,height:0,isUseImageResizing:void 0,mediaType:"image",uri:f!=null?f:h,width:0}}return{height:0,mediaType:"video",thumbnailUri:f!=null?f:h,uri:a!=null?a:h,width:0}}g.loadingStateUri=h;g.toFilmstripThumbnail=a;g.toFilmstripThumbnailSuspends=b}),98);
__d("MWV2MediaViewerContext.react",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useMemo;var j=i.createContext({getDownloadUrl:function(){},getPlayableUrl:function(){},getPreviewUrl:function(){},heroLoggingComponent:function(a){return null},loadMore:function(){},media:[]});function a(a){var b=d("react-compiler-runtime").c(10),c=a.children,e=a.getDownloadUrl,f=a.getPlayableUrl,g=a.getPreviewUrl,h=a.heroLoggingComponent,k=a.loadMore;a=a.media;var l;b[0]!==e||b[1]!==f||b[2]!==g||b[3]!==h||b[4]!==k||b[5]!==a?(l={getDownloadUrl:e,getPlayableUrl:f,getPreviewUrl:g,heroLoggingComponent:h,loadMore:k,media:a},b[0]=e,b[1]=f,b[2]=g,b[3]=h,b[4]=k,b[5]=a,b[6]=l):l=b[6];e=l;f=e;b[7]!==c||b[8]!==f?(g=i.jsx(j.Provider,{value:f,children:c}),b[7]=c,b[8]=f,b[9]=g):g=b[9];return g}g.context=j;g.MWV2MediaViewerContextProvider=a}),98);
__d("MWChatAttachmentMediaThumbnails.react",["CometMediaViewerFilmstrip.react","CometPlaceholder.react","MWChatAttachmentMediaState.react","MWChatAttachmentMediaUtils","MWV2MediaViewerContext.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useContext,k=b.useDeferredValue;function l(a){var b,e,f=d("react-compiler-runtime").c(23),g=a.activeCard,h=a.cards,k=a.getPreviewUrl,l=a.onSetImage,m=j(d("MWV2MediaViewerContext.react").context);f[0]!==m?(a=function(a,b){return a==null?"":m.getDownloadUrl(a,b)},f[0]=m,f[1]=a):a=f[1];var n=a;if(f[2]!==h||f[3]!==n||f[4]!==k){f[6]!==n||f[7]!==k?(a=function(a){return d("MWChatAttachmentMediaUtils").toFilmstripThumbnail({card:a,getPlayableUrl:n,getPreviewUrl:k})},f[6]=n,f[7]=k,f[8]=a):a=f[8];a=h.map(a);f[2]=h;f[3]=n;f[4]=k;f[5]=a}else a=f[5];a=a;if(f[9]!==(g==null||(b=g.attachment)==null?void 0:b.attachmentFbid)||f[10]!==(g==null||(e=g.attachment)==null?void 0:e.messageId)||f[11]!==h){var o,p,q,r,s;if(f[13]!==(g==null||(o=g.attachment)==null?void 0:o.attachmentFbid)||f[14]!==(g==null||(p=g.attachment)==null?void 0:p.messageId)){var t,u;s=function(a){var b,c;return a.attachment.attachmentFbid===(g==null||(b=g.attachment)==null?void 0:b.attachmentFbid)&&a.attachment.messageId===(g==null||(c=g.attachment)==null?void 0:c.messageId)};f[13]=g==null||(t=g.attachment)==null?void 0:t.attachmentFbid;f[14]=g==null||(u=g.attachment)==null?void 0:u.messageId;f[15]=s}else s=f[15];s=h.findIndex(s);f[9]=g==null||(q=g.attachment)==null?void 0:q.attachmentFbid;f[10]=g==null||(r=g.attachment)==null?void 0:r.messageId;f[11]=h;f[12]=s}else s=f[12];s=s;var v;f[16]!==h||f[17]!==l?(v=function(a){return l(h[a])},f[16]=h,f[17]=l,f[18]=v):v=f[18];var w;f[19]!==s||f[20]!==a||f[21]!==v?(w=i.jsx(c("CometMediaViewerFilmstrip.react"),{activeIndex:s,images:a,onSetImage:v}),f[19]=s,f[20]=a,f[21]=v,f[22]=w):w=f[22];return w}function a(a){var b=d("react-compiler-runtime").c(10),e=a.getPreviewUrl;a=a.shouldHide;a=a===void 0?!1:a;var f=j(d("MWChatAttachmentMediaState.react").context),g=f.card,h=f.cards;f=f.moveTo;h=k(h);var m;b[0]!==a?(m={0:{className:"xdj266r x11t971q xat24cr xvc5jky x193iq5w x6ikm8r x10wlt62"},1:{className:"xdj266r x11t971q xat24cr xvc5jky x193iq5w x6ikm8r x10wlt62 x1s85apg"}}[!!a<<0],b[0]=a,b[1]=m):m=b[1];b[2]!==g||b[3]!==h||b[4]!==e||b[5]!==f?(a=i.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MWChatAttachmentMediaThumbnails",children:i.jsx(l,{activeCard:g,cards:h,getPreviewUrl:e,onSetImage:f})}),b[2]=g,b[3]=h,b[4]=e,b[5]=f,b[6]=a):a=b[6];b[7]!==m||b[8]!==a?(g=i.jsx("div",babelHelpers["extends"]({},m,{"data-testid":void 0,children:a})),b[7]=m,b[8]=a,b[9]=g):g=b[9];return g}g["default"]=a}),98);
__d("MWChatMediaViewerControls.react",["fbt","FDSCircleButton.react","FDSShareFilled20Icon","FDSTooltip.react","Int64Hooks","LSFactory","LSIntEnum","LSMessagePointQueryStoredProcedure","LSVerifyThreadRowExistsStoredProcedure","MWChatMessageId","MWXCircleButton.react","MWXIconDownload","MWXRow.react","MWXRowItem.react","ODS","ReQL","ReQLSuspense","emptyFunction","promiseDone","react","react-compiler-runtime","useMWChatForward","useMWV2ForwardMessage","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=l||(l=d("react"));l.useCallback;var n=h._(/*BTDS*/"Download"),o=h._(/*BTDS*/"Forward");function p(a,b){var e=d("react-compiler-runtime").c(18),g=(i||(i=c("useReStore")))(),h,k;e[0]!==g||e[1]!==b?(h=function(){return b!=null?d("ReQL").fromTableAscending(g.tables.threads,["threadType"]).getKeyRange(b).map(q):d("ReQL").empty()},k=[g,b],e[0]=g,e[1]=b,e[2]=h,e[3]=k):(h=e[2],k=e[3]);var l=d("ReQLSuspense").useFirst(h,k,f.id+":63");e[4]!==g||e[5]!==a?(h=function(){return a!=null?d("ReQL").fromTableAscending(g.tables.messages.index("messageId")).getKeyRange(a):d("ReQL").empty()},k=[g,a],e[4]=g,e[5]=a,e[6]=h,e[7]=k):(h=e[6],k=e[7]);var m=d("ReQLSuspense").useFirst(h,k,f.id+":75");e[8]!==g||e[9]!==m||e[10]!==a||e[11]!==l||e[12]!==b?(h=function(){if(a==null||b==null)return;if(l==null){c("promiseDone")(g.runInTransaction(function(a){return c("LSVerifyThreadRowExistsStoredProcedure")(c("LSFactory")(a),{syncGroup:(j||(j=d("LSIntEnum"))).ofNumber(1),threadKey:b})},"readwrite",void 0,void 0,f.id+":91"));return}m==null&&c("promiseDone")(g.runInTransaction(function(d){return c("LSMessagePointQueryStoredProcedure")(c("LSFactory")(d),{messageId:a,threadKey:b,threadType:l})},"readwrite",void 0,void 0,f.id+":104"))},k=[g,m,a,l,b],e[8]=g,e[9]=m,e[10]=a,e[11]=l,e[12]=b,e[13]=h,e[14]=k):(h=e[13],k=e[14]);d("Int64Hooks").useEffectInt64(h,k);e[15]!==m||e[16]!==l?(h=[m,l],e[15]=m,e[16]=l,e[17]=h):h=e[17];return h}function q(a){a=a.threadType;return a}function a(a){var b=d("react-compiler-runtime").c(11),e=a.attachmentID,f=a.canForward,g=a.downloadLink,h=a.isCrossTransportForwardEnabled,i=a.isSecureForwardEnabled;a=a.messageID;f=f===void 0?!0:f;h=h===void 0?!1:h;i=i===void 0?!1:i;var j;b[0]!==g?(j=g!=null?m.jsx(c("MWXRowItem.react"),{children:m.jsx(c("FDSTooltip.react"),{align:"middle",tooltip:n,children:m.jsx(c("MWXCircleButton.react"),{icon:c("MWXIconDownload"),label:n,linkProps:{download:!0,target:"_blank",url:g},size:36,type:"dark-overlay"})})}):null,b[0]=g,b[1]=j):j=b[1];b[2]!==e||b[3]!==f||b[4]!==h||b[5]!==i||b[6]!==a?(g=f===!0?m.jsx(c("MWXRowItem.react"),{children:m.jsx(c("FDSTooltip.react"),{align:"middle",tooltip:o,children:m.jsx(s,{attachmentID:e,isCrossTransportForwardEnabled:h,isSecureForwardEnabled:i,messageID:a})})}):null,b[2]=e,b[3]=f,b[4]=h,b[5]=i,b[6]=a,b[7]=g):g=b[7];b[8]!==j||b[9]!==g?(e=m.jsxs(c("MWXRow.react"),{paddingTop:0,spacing:8,children:[j,g]}),b[8]=j,b[9]=g,b[10]=e):e=b[10];return e}function r(a){var b=d("react-compiler-runtime").c(8),e=a.isCrossTransportForwardEnabled,f=a.isSecureForwardEnabled,g=a.messageID;a=a.onForwardSend;e=e===void 0?!1:e;f=f===void 0?!1:f;f=f?"secure":e?"cross_transport":"open_";b[0]!==f||b[1]!==g||b[2]!==a?(e={forwardDialogType:f,messageID:g,onClose:c("emptyFunction"),onSend:a},b[0]=f,b[1]=g,b[2]=a,b[3]=e):e=b[3];var h=c("useMWChatForward")(e);b[4]!==h?(f=function(){(k||(k=d("ODS"))).bumpEntityKey(3185,"mwchat_media_viewer","forward"),h&&h.onClick()},b[4]=h,b[5]=f):f=b[5];var i=f;b[6]!==i?(g=m.jsx(c("FDSCircleButton.react"),{icon:c("FDSShareFilled20Icon"),label:o,onPress:function(a){return i()},size:36,testid:void 0,type_DEPRECATED:"dark-overlay"}),b[6]=i,b[7]=g):g=b[7];return g}function s(a){var b=d("react-compiler-runtime").c(11),c=a.attachmentID,e=a.isCrossTransportForwardEnabled,f=a.isSecureForwardEnabled;a=a.messageID;e=e===void 0?!1:e;f=f===void 0?!1:f;var g;b[0]!==a?(g=d("MWChatMessageId").getMessageId(a),b[0]=a,b[1]=g):g=b[1];g=g;var h;b[2]!==a?(h=d("MWChatMessageId").getThreadId(a),b[2]=a,b[3]=h):h=b[3];h=h;g=p(g,h);h=g[0];g=g[1];if(h==null||g==null)return null;var i;b[4]!==c||b[5]!==e||b[6]!==f||b[7]!==h||b[8]!==a||b[9]!==g?(i=m.jsx(t,{attachmentID:c,isCrossTransportForwardEnabled:e,isSecureForwardEnabled:f,message:h,messageID:a,messageThreadType:g}),b[4]=c,b[5]=e,b[6]=f,b[7]=h,b[8]=a,b[9]=g,b[10]=i):i=b[10];return i}function t(a){var b=d("react-compiler-runtime").c(7),e=a.attachmentID,f=a.isCrossTransportForwardEnabled,g=a.isSecureForwardEnabled,h=a.message,i=a.messageID;a=a.messageThreadType;f=f===void 0?!1:f;g=g===void 0?!1:g;var j=d("useMWV2ForwardMessage").useMWV2ForwardMessage(h,a,e);b[0]!==j?(h=function(a){return c("promiseDone")(j(a))},b[0]=j,b[1]=h):h=b[1];a=h;b[2]!==f||b[3]!==g||b[4]!==i||b[5]!==a?(e=m.jsx(r,{isCrossTransportForwardEnabled:f,isSecureForwardEnabled:g,messageID:i,onForwardSend:a}),b[2]=f,b[3]=g,b[4]=i,b[5]=a,b[6]=e):e=b[6];return e}g["default"]=a}),226);
__d("MWMediaViewerRenderQpl",["MWMediaRenderQplUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return d("MWMediaRenderQplUtils").useCommonMediaRenderQplForAttachment(a,b,"full_screen_view")}g.useMediaViewerRenderQpl=a}),98);
__d("useMWMaybeInboxMediaRestoreLoop",["cr:20239","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var c=d("react-compiler-runtime").c(2);a=b("cr:20239")(a);var e;c[0]!==a?(e=a!=null?a:{onEBOnboarded:i,startMediaSync:h},c[0]=a,c[1]=e):e=c[1];return e}function h(){}function i(){}g["default"]=a}),98);
__d("useMWV2MediaViewerOpenDownloadUrl",["react","react-compiler-runtime","useMWV2MediaViewerOpenPlayableUrl"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useCallback;function a(){var a=d("react-compiler-runtime").c(2),b=c("useMWV2MediaViewerOpenPlayableUrl")(),e;a[0]!==b?(e=function(a,c,d){a=b(a,c,d);if(a==null)return;c=new URL(a);c.searchParams.set("dl","1");return c.toString()},a[0]=b,a[1]=e):e=a[1];return e}g["default"]=a}),98);
__d("MWV2MediaViewerCutoverWrapper.react",["LSThreadMediaGalleryGroup","MWChatAttachmentMediaState.react","MWMessageSearchStatusTypes","MWV2MediaViewerContext.react","emptyFunction","justknobx","react","react-compiler-runtime","useMAWLoadMoreCutoverThreadSharedAttachments","useMWMaybeInboxMediaRestoreLoop","useMWMediaGalleryRestoreStatus","useMWV2MediaViewerOpenDownloadUrl","useMWV2MediaViewerOpenPlayableUrl","useMWV2MediaViewerOpenPreviewUrl","useMWV2MediaViewerSecurePlayableUrl_CausesSuspense","useMWV2MediaViewerSecurePreviewUrl_CausesSuspense"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useCallback;function a(a){var b=d("react-compiler-runtime").c(30),e=a.children,f=a.initialAttachment,g=a.openThreadKey,h=a.secureThreadKey;a=a.threadType;var k;b[0]!==h||b[1]!==a?(k={threadKey:h,threadType:a},b[0]=h,b[1]=a,b[2]=k):k=b[2];c("useMWMaybeInboxMediaRestoreLoop")(k);b[3]!==h||b[4]!==a?(k={threadKey:h,threadType:a},b[3]=h,b[4]=a,b[5]=k):k=b[5];k=c("useMWMediaGalleryRestoreStatus")(k);k=k===d("MWMessageSearchStatusTypes").RestoreStatus.IN_PROGRESS;var l;b[6]===Symbol["for"]("react.memo_cache_sentinel")?(l={entrypoint:"media_viewer"},b[6]=l):l=b[6];var m;b[7]===Symbol["for"]("react.memo_cache_sentinel")?(m=c("justknobx")._("3233"),b[7]=m):m=b[7];h=c("useMAWLoadMoreCutoverThreadSharedAttachments")(h,g,a,l,c("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS,k,m);g=h.attachments;a=h.onLoadMore;var n=j,o=c("useMWV2MediaViewerOpenPreviewUrl")(),p=c("useMWV2MediaViewerOpenPlayableUrl")(),q=c("useMWV2MediaViewerOpenDownloadUrl")(),r=c("useMWV2MediaViewerSecurePreviewUrl_CausesSuspense")(),s=c("useMWV2MediaViewerSecurePlayableUrl_CausesSuspense")();b[8]!==o||b[9]!==r?(l=function(a,b,c){if(!a)return"";return!n(a)?o(a,b,c):r(a,b,c)},b[8]=o,b[9]=r,b[10]=l):l=b[10];k=l;b[11]!==p||b[12]!==s?(m=function(a,b,c){if(a==null)return"";return!n(a)?p(a,b,c):s(a,b,c)},b[11]=p,b[12]=s,b[13]=m):m=b[13];h=m;b[14]!==q||b[15]!==s?(l=function(a,b,c){if(a==null)return"";return!n(a)?q(a,b,c):s(a,b,c)},b[14]=q,b[15]=s,b[16]=l):l=b[16];m=l;b[17]!==g||b[18]!==e||b[19]!==h||b[20]!==k||b[21]!==f?(l=i.jsx(d("MWChatAttachmentMediaState.react").MWChatAttachmentMediaStateProviderFromAttachments,{attachments:g,getIsSecureThread:n,getPlayableUrl:h,getPreviewUrl:k,initialAttachment:f,children:e}),b[17]=g,b[18]=e,b[19]=h,b[20]=k,b[21]=f,b[22]=l):l=b[22];b[23]!==g||b[24]!==m||b[25]!==h||b[26]!==k||b[27]!==a||b[28]!==l?(e=i.jsx(d("MWV2MediaViewerContext.react").MWV2MediaViewerContextProvider,{getDownloadUrl:m,getPlayableUrl:h,getPreviewUrl:k,heroLoggingComponent:c("emptyFunction"),loadMore:a,media:g,children:l}),b[23]=g,b[24]=m,b[25]=h,b[26]=k,b[27]=a,b[28]=l,b[29]=e):e=b[29];return e}function j(a){return!((a==null?void 0:a.transportKey)==="FBBroker"||(a==null?void 0:a.transportKey)==="FBLegacyBroker")}g["default"]=a}),98);
__d("MWV2MediaViewerNullState.react",["fbt","CometColumn.react","CometColumnItem.react","FDSNullState.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(){var a=d("react-compiler-runtime").c(1),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=j.jsx(c("CometColumn.react"),{expanding:!0,verticalAlign:"center",children:j.jsx(c("CometColumnItem.react"),{children:j.jsx(c("FDSNullState.react"),{headline:h._(/*BTDS*/"Sorry, this content isn't available right now")})})}),a[0]=b):b=a[0];return b}g["default"]=a}),226);
__d("MWV2MediaViewerOpenWrapper.react",["CometHero.react","MWChatAttachmentMediaState.react","MWSharedAttachmentsSectionHooks","MWV2MediaViewerContext.react","react","react-compiler-runtime","useLoadMoreThreadSharedAttachments.react","useMWMediaLoadingQplLogger","useMWV2MediaViewerOpenDownloadUrl","useMWV2MediaViewerOpenPlayableUrl","useMWV2MediaViewerOpenPreviewUrl"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useCallback;function a(a){var b=d("react-compiler-runtime").c(22),e=a.children,f=a.initialAttachment;a=a.thread;var g=d("MWSharedAttachmentsSectionHooks").useQueryMediaAttachments(a.threadKey),h=g[0],l=g[1],m=g[2];g=g[4];var n;b[0]!==a.threadType?(n={entrypoint:"media_viewer",threadType:a.threadType},b[0]=a.threadType,b[1]=n):n=b[1];n=c("useMWMediaLoadingQplLogger")(n);l=c("useLoadMoreThreadSharedAttachments.react")(l,a.threadKey,n.logLoadMediaStart);a=g!=null?g:!0;b[2]!==m||b[3]!==l||b[4]!==h||b[5]!==n.logLoadMediaCancel||b[6]!==n.logLoadMediaSuccess||b[7]!==a?(g={attachmentsRange:m,hasMore:a,loadMore:l,logLoadMediaCancel:n.logLoadMediaCancel,logLoadMediaSuccess:n.logLoadMediaSuccess,media:h},b[2]=m,b[3]=l,b[4]=h,b[5]=n.logLoadMediaCancel,b[6]=n.logLoadMediaSuccess,b[7]=a,b[8]=g):g=b[8];m=d("MWSharedAttachmentsSectionHooks").useLoader(g);l=m[1];n=c("useMWV2MediaViewerOpenPreviewUrl")();a=c("useMWV2MediaViewerOpenPlayableUrl")();g=c("useMWV2MediaViewerOpenDownloadUrl")();m=k;b[9]!==e||b[10]!==a||b[11]!==n||b[12]!==f||b[13]!==h?(m=i.jsx(d("MWChatAttachmentMediaState.react").MWChatAttachmentMediaStateProviderFromAttachments,{attachments:h,getIsSecureThread:m,getPlayableUrl:a,getPreviewUrl:n,initialAttachment:f,children:e}),b[9]=e,b[10]=a,b[11]=n,b[12]=f,b[13]=h,b[14]=m):m=b[14];b[15]!==g||b[16]!==a||b[17]!==n||b[18]!==l||b[19]!==h||b[20]!==m?(e=i.jsx(d("MWV2MediaViewerContext.react").MWV2MediaViewerContextProvider,{getDownloadUrl:g,getPlayableUrl:a,getPreviewUrl:n,heroLoggingComponent:j,loadMore:l,media:h,children:m}),b[15]=g,b[16]=a,b[17]=n,b[18]=l,b[19]=h,b[20]=m,b[21]=e):e=b[21];return e}function j(a){return i.jsx(c("CometHero.react"),{description:a})}j.displayName=j.name+" [from "+f.id+"]";function k(){return!1}g["default"]=a}),98);
__d("MWV2MediaViewerSecureWrapper.react",["LSThreadMediaGalleryGroup","MAWDbMsg","MWChatAttachmentMediaState.react","MWSharedAttachmentsSectionHooks","MWV2MediaViewerContext.react","MWV2MediaViewerNullState.react","cr:5709","cr:5931","cr:5970","emptyFunction","justknobx","react","react-compiler-runtime","useMAWQuerySecureMediaAttachments","useMWMaybeInboxMediaRestoreLoop","useMWMediaLoadingQplLogger","useMWV2MediaViewerSecurePlayableUrl_CausesSuspense","useMWV2MediaViewerSecurePreviewUrl_CausesSuspense"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useCallback;function a(a){return j}function j(){}var k=b("cr:5709")==null?a:b("cr:5709");function e(a){var e=d("react-compiler-runtime").c(34),f=a.children,g=a.initialAttachment;a=a.thread;var h;e[0]===Symbol["for"]("react.memo_cache_sentinel")?(h=c("justknobx")._("3233"),e[0]=h):h=e[0];h=h;var j=c("useMAWQuerySecureMediaAttachments")(a.threadKey,h),m=j[0],n=j[2],o=j[3];j=j[4];c("useMWMaybeInboxMediaRestoreLoop")(a);var p=j!=null?j:!0;e[1]!==a.threadType?(j={entrypoint:"media_viewer",threadType:a.threadType},e[1]=a.threadType,e[2]=j):j=e[2];j=c("useMWMediaLoadingQplLogger")(j);if(e[3]!==(n==null?void 0:n.lastLoadedMessageId)){var q;q=(q=d("MAWDbMsg").toMsgId((q=n==null?void 0:n.lastLoadedMessageId)!=null?q:""))!=null?q:void 0;e[3]=n==null?void 0:n.lastLoadedMessageId;e[4]=q}else q=e[4];e[5]!==p||e[6]!==o||e[7]!==j||e[8]!==q||e[9]!==a.threadKey?(h={earliestLoadedMediaMessageId:q,hasMoreBefore:p,mediaGalleryGroup:c("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS,minTimestampMs:o,pageSize:h,qplLogger:j,threadKey:a.threadKey},e[5]=p,e[6]=o,e[7]=j,e[8]=q,e[9]=a.threadKey,e[10]=h):h=e[10];var r=k(h);e[11]!==p||e[12]!==r?(o=function(){p&&r()},e[11]=p,e[12]=r,e[13]=o):o=e[13];q=o;e[14]!==n||e[15]!==p||e[16]!==q||e[17]!==m||e[18]!==j.logLoadMediaCancel||e[19]!==j.logLoadMediaSuccess?(a={attachmentsRange:n,hasMore:p,loadMore:q,logLoadMediaCancel:j.logLoadMediaCancel,logLoadMediaSuccess:j.logLoadMediaSuccess,media:m},e[14]=n,e[15]=p,e[16]=q,e[17]=m,e[18]=j.logLoadMediaCancel,e[19]=j.logLoadMediaSuccess,e[20]=a):a=e[20];h=d("MWSharedAttachmentsSectionHooks").useLoader(a);o=h[1];n=c("useMWV2MediaViewerSecurePreviewUrl_CausesSuspense")();q=c("useMWV2MediaViewerSecurePlayableUrl_CausesSuspense")();j=l;if(b("cr:5970")==null||b("cr:5931")==null){e[21]===Symbol["for"]("react.memo_cache_sentinel")?(a=i.jsx(c("MWV2MediaViewerNullState.react"),{}),e[21]=a):a=e[21];return a}e[22]!==f||e[23]!==q||e[24]!==n||e[25]!==g||e[26]!==m?(h=i.jsx(d("MWChatAttachmentMediaState.react").MWChatAttachmentMediaStateProviderFromAttachments,{attachments:m,getIsSecureThread:j,getPlayableUrl:q,getPreviewUrl:n,initialAttachment:g,children:f}),e[22]=f,e[23]=q,e[24]=n,e[25]=g,e[26]=m,e[27]=h):h=e[27];e[28]!==q||e[29]!==n||e[30]!==o||e[31]!==m||e[32]!==h?(a=i.jsx(d("MWV2MediaViewerContext.react").MWV2MediaViewerContextProvider,{getDownloadUrl:q,getPlayableUrl:q,getPreviewUrl:n,heroLoggingComponent:c("emptyFunction"),loadMore:o,media:m,children:h}),e[28]=q,e[29]=n,e[30]=o,e[31]=m,e[32]=h,e[33]=a):a=e[33];return a}function l(){return!0}g["default"]=e}),98);
__d("MWV2MediaViewer.react",["FBLogger","FocusRegion.react","FocusWithinHandler.react","I64","LSMessagingThreadTypeUtil","MAWThreadCutover","MWFocusTable.react","MWLSThread","MWPThreadCapabilitiesContext","MWV2MediaViewerCutoverWrapper.react","MWV2MediaViewerNullState.react","MWV2MediaViewerOpenWrapper.react","MWV2MediaViewerSecureWrapper.react","XPlatReactFocusRegion.react","cr:7186","focusScopeQueries","justknobx","react","react-compiler-runtime","useMWMediaViewerOpenQPLLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react"));e=h;e.useCallback;var k=e.useEffect,l=e.useId;function a(a){var e=d("react-compiler-runtime").c(54),f=a.attachment,g=a.onClose;a=d("useMWMediaViewerOpenQPLLogger").useMWMediaViewerOpenQPLLogger();var h=a.endSuccess,m;e[0]!==h?(a=function(){h()},m=[h],e[0]=h,e[1]=a,e[2]=m):(a=e[1],m=e[2]);k(a,m);a=d("MWLSThread").useThread(f.threadKey);m=d("MWPThreadCapabilitiesContext").Provider;var n=l(),o;e[3]!==n?(o=function(a){a||d("FocusRegion.react").focusRegionById(n,d("MWFocusTable.react").tabbableScopeQuery)},e[3]=n,e[4]=o):o=e[4];o=o;var p=d("MAWThreadCutover").useGetCutoverOpenThreadKey(f.threadKey),q=d("MAWThreadCutover").useCutoverSecureThreadKeyForOpenThreadKey(p==null?f.threadKey:void 0);if(a==null){c("FBLogger")("messenger_web_media").mustfix("Thread is null in media viewer for attachment with threadKey: %s",(i||(i=d("I64"))).to_string(f.threadKey));var r;e[5]===Symbol["for"]("react.memo_cache_sentinel")?(r=j.jsx(c("MWV2MediaViewerNullState.react"),{}),e[5]=r):r=e[5];return r}r=d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType);if(p!=null||q!=null){p=p!=null?p:a.threadKey;q=q!=null?q:a.threadKey;var s;e[6]!==g?(s=function(){g&&g()},e[6]=g,e[7]=s):s=e[7];var t;e[8]!==f||e[9]!==s||e[10]!==a?(t=j.jsx(b("cr:7186"),{initialAttachment:f,onClose:s,thread:a}),e[8]=f,e[9]=s,e[10]=a,e[11]=t):t=e[11];e[12]!==f||e[13]!==p||e[14]!==q||e[15]!==t||e[16]!==a.threadType?(s=j.jsx(c("MWV2MediaViewerCutoverWrapper.react"),{initialAttachment:f,openThreadKey:p,secureThreadKey:q,threadType:a.threadType,children:t}),e[12]=f,e[13]=p,e[14]=q,e[15]=t,e[16]=a.threadType,e[17]=s):s=e[17];p=s;e[18]!==p||e[19]!==a?(q=j.jsx(m,{thread:a,children:p}),e[18]=p,e[19]=a,e[20]=q):q=e[20];t=q;e[21]!==t||e[22]!==n?(s=j.jsx(c("XPlatReactFocusRegion.react"),{autoFocusQuery:d("MWFocusTable.react").tabbableScopeQuery,containFocusQuery:d("MWFocusTable.react").tabbableScopeQuery,id:n,recoverFocusQuery:d("focusScopeQueries").headerFirstTabbableSecondScopeQuery,children:t}),e[21]=t,e[22]=n,e[23]=s):s=e[23];p=s;e[24]!==p||e[25]!==o?(q=c("justknobx")._("3588")?j.jsx(c("FocusWithinHandler.react"),{onFocusChange:o,onFocusVisibleChange:o,children:p}):p,e[24]=p,e[25]=o,e[26]=q):q=e[26];return q}if(r){e[27]!==g?(t=function(){g&&g()},e[27]=g,e[28]=t):t=e[28];e[29]!==f||e[30]!==t||e[31]!==a?(s=j.jsx(b("cr:7186"),{initialAttachment:f,onClose:t,thread:a}),e[29]=f,e[30]=t,e[31]=a,e[32]=s):s=e[32];e[33]!==f||e[34]!==s||e[35]!==a?(p=j.jsx(c("MWV2MediaViewerSecureWrapper.react"),{initialAttachment:f,thread:a,children:s}),e[33]=f,e[34]=s,e[35]=a,e[36]=p):p=e[36];q=p;e[37]!==q||e[38]!==a?(r=j.jsx(m,{thread:a,children:q}),e[37]=q,e[38]=a,e[39]=r):r=e[39];t=r;e[40]!==t||e[41]!==n?(s=j.jsx(c("XPlatReactFocusRegion.react"),{autoFocusQuery:d("MWFocusTable.react").tabbableScopeQuery,containFocusQuery:d("MWFocusTable.react").tabbableScopeQuery,id:n,recoverFocusQuery:d("focusScopeQueries").headerFirstTabbableSecondScopeQuery,children:t}),e[40]=t,e[41]=n,e[42]=s):s=e[42];p=s;e[43]!==p||e[44]!==o?(m=c("justknobx")._("3588")?j.jsx(c("FocusWithinHandler.react"),{onFocusChange:o,onFocusVisibleChange:o,children:p}):p,e[43]=p,e[44]=o,e[45]=m):m=e[45];return m}e[46]!==f||e[47]!==g||e[48]!==a?(q=j.jsx(b("cr:7186"),{initialAttachment:f,onClose:g,thread:a}),e[46]=f,e[47]=g,e[48]=a,e[49]=q):q=e[49];e[50]!==f||e[51]!==q||e[52]!==a?(r=j.jsx(c("MWV2MediaViewerOpenWrapper.react"),{initialAttachment:f,thread:a,children:q}),e[50]=f,e[51]=q,e[52]=a,e[53]=r):r=e[53];return r}g["default"]=a}),98);
__d("MWV2MediaViewerAspectRatioContainer.react",["BaseAspectRatioContainer.react","gkx","react","react-compiler-runtime","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={marginTop:"xr1yuqi",marginInlineEnd:"x11t971q",marginBottom:"x4ii5y1",marginInlineStart:"xvc5jky",maxHeight:"x1jols5v",maxWidth:"xf68679",width:"xh8yej3",$$css:!0},l={transform:"xsqj5wx",$$css:!0},m={containerMaxSize:function(a,b,c){return[k,{aspectRatio:b!=null?"x10y9f9r":b,$$css:!0},{"--x-aspectRatio":b!=null?b:void 0,"--x-maxHeight":function(a){return typeof a==="number"?a+"px":a!=null?a:void 0}("min(calc(100vh - "+c+"px),"+(a!=null?a:1e4)+"px)"),"--x-maxWidth":function(a){return typeof a==="number"?a+"px":a!=null?a:void 0}("min(calc((100vh - "+c+"px) * "+b+"),"+(a!=null?a:1e4)*b+"px)")}]},scale:function(a){return[l,{"--x-transform":"scale3d("+a+", "+a+", 1)"!=null?"scale3d("+a+", "+a+", 1)":void 0}]}};function a(a){var b=d("react-compiler-runtime").c(20),e=a.children,f=a.height,g=a.imageContainerRef,i=a.imageExpansionFactor,k=a.isImageExpanded,l=a.onClickOutsideOfChildren,o=a.outsideContainerRef;a=a.width;i=i===void 0?1:i;k=k===void 0?!1:k;a=a!=null&&f!=null?a/f:1;var p=c("gkx")("17009")?174:76,q;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(q={className:"x6s0dn4 x78zum5 x5yr21d xl56j7k xh8yej3"},b[0]=q):q=b[0];if(b[1]!==a||b[2]!==f||b[3]!==i||b[4]!==k){var r;b[6]!==i||b[7]!==k?(r=k&&m.scale(i),b[6]=i,b[7]=k,b[8]=r):r=b[8];p=(h||(h=c("stylex"))).props(m.containerMaxSize(f,a,p),r);b[1]=a;b[2]=f;b[3]=i;b[4]=k;b[5]=p}else p=b[5];b[9]!==a||b[10]!==e?(r=j.jsx(c("BaseAspectRatioContainer.react"),{aspectRatio:a,children:e}),b[9]=a,b[10]=e,b[11]=r):r=b[11];b[12]!==g||b[13]!==p||b[14]!==r?(f=j.jsx("div",babelHelpers["extends"]({},p,{"aria-hidden":!0,onClick:n,ref:g,children:r})),b[12]=g,b[13]=p,b[14]=r,b[15]=f):f=b[15];b[16]!==l||b[17]!==o||b[18]!==f?(i=j.jsx("div",babelHelpers["extends"]({"aria-hidden":!0},q,{onClick:l,ref:o,children:f})),b[16]=l,b[17]=o,b[18]=f,b[19]=i):i=b[19];return i}function n(a){a.cancelBubble=!0,a.stopPropagation()}g["default"]=a}),98);
__d("MWV2MediaViewerDownloadControl.react",["fbt","MWV2MediaViewerActionButton.react","MWXIconDownload","MWXRowItem.react","MessengerWebUXLogger","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=h._(/*BTDS*/"Download");function a(a){var b=d("react-compiler-runtime").c(7);a=a.uri;var e=c("MessengerWebUXLogger").useInteractionLogger(),f;b[0]!==a?(f={download:!0,target:"_blank",url:a},b[0]=a,b[1]=f):f=b[1];b[2]!==e?(a=function(){e==null||e({eventName:"fsmv_download_click"})},b[2]=e,b[3]=a):a=b[3];var g;b[4]!==f||b[5]!==a?(g=j.jsx(c("MWXRowItem.react"),{children:j.jsx(c("MWV2MediaViewerActionButton.react"),{icon:c("MWXIconDownload"),label:k,linkProps:f,onPress:a})}),b[4]=f,b[5]=a,b[6]=g):g=b[6];return g}g["default"]=a}),226);
__d("MWV2MediaViewerForwardControl.react",["fbt","Int64Hooks","LSMessagingThreadTypeUtil","MWV2MediaViewerActionButton.react","MWXIconShare","MWXRowItem.react","ODS","react","react-compiler-runtime","useMWHasForwardAction","useMWV2MessageForwardAction"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||d("react");function a(a){var b=d("react-compiler-runtime").c(8),e=a.attachment,f=a.message,g=a.thread;a=e==null?void 0:e.attachmentFbid;var i;b[0]!==g.threadType?(i=d("LSMessagingThreadTypeUtil").isArmadilloSecure(g.threadType),b[0]=g.threadType,b[1]=i):i=b[1];i=i;var l,m;b[2]!==g.threadType?(l=function(){return g.threadType},m=[g.threadType],b[2]=g.threadType,b[3]=l,b[4]=m):(l=b[3],m=b[4]);l=d("Int64Hooks").useMemoInt64(l,m);var n=c("useMWV2MessageForwardAction")(i,f,l);m=c("useMWHasForwardAction")(g.threadType,f,e);i=m.hasForwardAction;l=a!=null&&i;if(a==null||!l)return null;b[5]===Symbol["for"]("react.memo_cache_sentinel")?(f=h._(/*BTDS*/"Forward"),b[5]=f):f=b[5];e=f;b[6]!==n?(m=k.jsx(c("MWXRowItem.react"),{children:k.jsx(c("MWV2MediaViewerActionButton.react"),{icon:c("MWXIconShare"),label:e,onPress:function(){(j||(j=d("ODS"))).bumpEntityKey(3185,"mwchat_media_viewer","forward"),n()},testid:void 0})}),b[6]=n,b[7]=m):m=b[7];return m}g["default"]=a}),226);
__d("MWV2MediaViewerControls.react",["MWV2MediaViewerCloseControl.react","MWV2MediaViewerContext.react","MWV2MediaViewerDownloadControl.react","MWV2MediaViewerForwardControl.react","MWXRow.react","cr:9742","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useContext;function a(a){var e=d("react-compiler-runtime").c(19),f=a.attachment,g=a.message,h=a.onClose;a=a.thread;var k=j(d("MWV2MediaViewerContext.react").context),l;e[0]!==f||e[1]!==k?(l=k.getDownloadUrl(f,"MWV2MediaViewerControls"),e[0]=f,e[1]=k,e[2]=l):l=e[2];k=l;e[3]!==f||e[4]!==g?(l=g!=null&&f!=null&&b("cr:9742")!=null&&i.jsx(b("cr:9742"),{attachment:f,message:g}),e[3]=f,e[4]=g,e[5]=l):l=e[5];var m;e[6]!==k?(m=k!=null&&i.jsx(c("MWV2MediaViewerDownloadControl.react"),{uri:k}),e[6]=k,e[7]=m):m=e[7];e[8]!==f||e[9]!==g||e[10]!==a?(k=g!=null?i.jsx(c("MWV2MediaViewerForwardControl.react"),{attachment:f,message:g,thread:a}):null,e[8]=f,e[9]=g,e[10]=a,e[11]=k):k=e[11];e[12]!==h?(f=h!=null?i.jsx(c("MWV2MediaViewerCloseControl.react"),{onClose:h}):null,e[12]=h,e[13]=f):f=e[13];e[14]!==l||e[15]!==m||e[16]!==k||e[17]!==f?(g=i.jsxs(c("MWXRow.react"),{paddingTop:0,spacing:8,testid:void 0,children:[l,m,k,f]}),e[14]=l,e[15]=m,e[16]=k,e[17]=f,e[18]=g):g=e[18];return g}g["default"]=a}),98);
__d("MWV2MediaViewerControlsContainer.react",["CometPlaceholder.react","MWV2MediaViewerControls.react","MWV2MediaViewerControlsFallback.react","cr:7197","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var e=d("react-compiler-runtime").c(10),f=a.attachment,g=a.message,h=a.onClose;a=a.thread;var j;e[0]!==h?(j=h!=null&&!b("cr:7197")?i.jsx(c("MWV2MediaViewerControlsFallback.react"),{onClose:h}):null,e[0]=h,e[1]=j):j=e[1];var k;e[2]!==f||e[3]!==g||e[4]!==h||e[5]!==a?(k=b("cr:7197")?i.jsx(b("cr:7197"),{attachment:f,message:g,onClose:h,thread:a}):i.jsx(c("MWV2MediaViewerControls.react"),{attachment:f,message:g,onClose:h,thread:a}),e[2]=f,e[3]=g,e[4]=h,e[5]=a,e[6]=k):k=e[6];e[7]!==j||e[8]!==k?(f=i.jsx(c("CometPlaceholder.react"),{fallback:j,name:"MWV2MediaViewerContent.Controls",children:k}),e[7]=j,e[8]=k,e[9]=f):f=e[9];return f}g["default"]=a}),98);
__d("MWV2MediaViewerDimensions",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;b=1.75;function i(a){return a.previewHeightLarge!=null?(h||(h=d("I64"))).to_float(a.previewHeightLarge):a.previewHeight!=null?(h||(h=d("I64"))).to_float(a.previewHeight):void 0}function j(a){return a.previewWidthLarge!=null?(h||(h=d("I64"))).to_float(a.previewWidthLarge):a.previewWidth!=null?(h||(h=d("I64"))).to_float(a.previewWidth):void 0}function a(a){return{height:i(a),width:j(a)}}g.IMAGE_EXPANSION_FACTOR=b;g.getLargestAttachmentDimensions=a}),98);
__d("MWV2MediaViewerItemImage.react",["fbt","BaseImage.react","I64","MWAnimatedImageControlsUtil","MWAnimatedImageThumbnailWithPlayButton.react","MWChatAttachmentMediaState.react","MWV2MediaViewerContext.react","MWV2MediaViewerDimensions","MWXIconHd","MWXIconStrict.react","MWXPressable.react","MWXThreadThemeColor","MessagingAttachmentType","cr:7201","cr:7203","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||(i=d("react"));e=i;var l=e.useContext,m=e.useEffect,n=e.useRef,o=e.useState;function a(a){var e=d("react-compiler-runtime").c(31),f=a.attachment,g=a.imageContainerRef,i=a.mediaRenderQpl;a=a.outsideContainerRef;var q=d("MWAnimatedImageControlsUtil").useGetMessengerAutoplaySetting(),r=l(d("MWChatAttachmentMediaState.react").context);r=r.isImageExpanded;var s=l(d("MWV2MediaViewerContext.react").context),t=s.getPlayableUrl;s=s.heroLoggingComponent;var u=n(null),v=o(!1),w=v[0],x=v[1],y;e[0]!==i?(v=function(){var a;u.current!=null&&(a=u.current)!=null&&a.complete&&i.endSuccess()},y=[i],e[0]=i,e[1]=v,e[2]=y):(v=e[1],y=e[2]);m(v,y);e[3]!==f?(v=d("MWV2MediaViewerDimensions").getLargestAttachmentDimensions(f),e[3]=f,e[4]=v):v=e[4];y=v;v=y.height;y=y.width;var z=(j||(j=d("I64"))).to_int32(f.attachmentType)===c("MessagingAttachmentType").ANIMATED_IMAGE,A;e[5]!==f||e[6]!==t||e[7]!==i?(A=t(f,"MediaViewerImage",i),e[5]=f,e[6]=t,e[7]=i,e[8]=A):A=e[8];t=A;if(t!=null){var B=z&&q!==d("MWAnimatedImageControlsUtil").MWAutoplayAnimationsSetting.ON;e[9]!==s?(A=s("MWV2MediaViewerImage"),e[9]=s,e[10]=A):A=e[10];e[11]!==f||e[12]!==v||e[13]!==g||e[14]!==z||e[15]!==w||e[16]!==i||e[17]!==a||e[18]!==B||e[19]!==t||e[20]!==y?(q=B?w===!1?k.jsx(d("MWAnimatedImageThumbnailWithPlayButton.react").MWAnimatedImageThumbnailWithPlayButton,{connectBottom:!1,connectTop:!1,dbAttachment:f,entryPoint:d("MWAnimatedImageThumbnailWithPlayButton.react").AnimatedImageEntryPoint.MediaViewer,mediaRenderQpl:i,message:null,onPlay:function(){return x(!0)},outgoing:!1,previewHeight:v,previewWidth:y}):k.jsx(c("MWXPressable.react"),{"aria-label":h._(/*BTDS*/"Pause GIF"),hideHoverOverlay:!0,onPress:function(){B&&x(!1)},children:k.jsx(c("BaseImage.react"),{height:"100%",objectFit:"contain",onError:function(){i.endFail("load-image-error")},onLoad:function(){i.endSuccess()},ref:u,src:t,width:"100%"})}):!z&&b("cr:7203")!=null?k.jsx(b("cr:7203"),{imageContainerRef:g,outsideContainerRef:a,children:k.jsx(c("BaseImage.react"),{height:"100%",objectFit:"contain",onError:function(){i.endFail("load-image-error")},onLoad:function(){i.endSuccess()},ref:u,src:t,width:"100%"})}):k.jsx(c("BaseImage.react"),{height:"100%",objectFit:"contain",onError:function(){i.endFail("load-image-error")},onLoad:function(){i.endSuccess()},ref:u,src:t,width:"100%"}),e[11]=f,e[12]=v,e[13]=g,e[14]=z,e[15]=w,e[16]=i,e[17]=a,e[18]=B,e[19]=t,e[20]=y,e[21]=q):q=e[21];e[22]!==f||e[23]!==r?(s=k.jsx(p,{attachment:f,shouldHide:r}),v=b("cr:7201")&&k.jsx(b("cr:7201"),{attachment:f,shouldHide:r}),e[22]=f,e[23]=r,e[24]=s,e[25]=v):(s=e[24],v=e[25]);e[26]!==A||e[27]!==q||e[28]!==s||e[29]!==v?(g=k.jsxs(k.Fragment,{children:[A,q,s,v]}),e[26]=A,e[27]=q,e[28]=s,e[29]=v,e[30]=g):g=e[30];return g}else{i.endFail("missing-playable-url");return null}}function p(a){var b=d("react-compiler-runtime").c(6),e=a.attachment;a=a.shouldHide;a=a===void 0?!1:a;e=e;e=e.isHd===!0;if(!e)return null;b[0]!==a?(e={0:{className:"x78zum5 x5yr21d x47corl x10l6tqk xh8yej3"},1:{className:"x5yr21d x47corl x10l6tqk xh8yej3 x1s85apg"}}[!!a<<0],b[0]=a,b[1]=e):e=b[1];b[2]===Symbol["for"]("react.memo_cache_sentinel")?(a={className:"xdg88n9 x10l6tqk xomnu4r"},b[2]=a):a=b[2];b[3]===Symbol["for"]("react.memo_cache_sentinel")?(a=k.jsx("div",babelHelpers["extends"]({},a,{children:k.jsx(c("MWXIconStrict.react"),{color:d("MWXThreadThemeColor").mwxThreadThemeColor("rgba(255,255,255,0.7)"),icon:c("MWXIconHd"),size:24})})),b[3]=a):a=b[3];b[4]!==e?(a=k.jsx("div",babelHelpers["extends"]({},e,{children:a})),b[4]=e,b[5]=a):a=b[5];return a}g["default"]=a}),226);
__d("MWV2MediaViewerItemVideo.react",["MWChatVideoPlayer.react","MWV2MediaViewerContext.react","cr:7201","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useContext;function a(a){var e=d("react-compiler-runtime").c(14),f=a.attachment;a=a.mediaRenderQpl;var g=j(d("MWV2MediaViewerContext.react").context);g=g.getPlayableUrl;var h;e[0]!==f||e[1]!==g||e[2]!==a?(h=g(f,"MediaViewerVideo",a),e[0]=f,e[1]=g,e[2]=a,e[3]=h):h=e[3];g=h;if(g!=null){e[4]===Symbol["for"]("react.memo_cache_sentinel")?(h={className:"x78zum5 x1iyjqo2 xmz0i5r"},e[4]=h):h=e[4];var k;e[5]!==f.attachmentFbid||e[6]!==a||e[7]!==g?(k=i.jsx(c("MWChatVideoPlayer.react"),{controls:"mwchat",fbid:f.attachmentFbid,hideExpandButton:!1,isMediaViewer:!0,mediaRenderQpl:a,originalHeight:1e3,originalWidth:1e3,sdSrc:g,shouldForcePauseOnClick:!1}),e[5]=f.attachmentFbid,e[6]=a,e[7]=g,e[8]=k):k=e[8];e[9]!==f?(g=b("cr:7201")&&i.jsx(b("cr:7201"),{attachment:f}),e[9]=f,e[10]=g):g=e[10];e[11]!==k||e[12]!==g?(f=i.jsxs("div",babelHelpers["extends"]({},h,{children:[k,g]})),e[11]=k,e[12]=g,e[13]=f):f=e[13];return f}else{a.endFail("missing-playable-url");return null}}g["default"]=a}),98);
__d("MWV2MediaViewerItem.react",["I64","LSIntEnum","MWChatAttachmentMediaState.react","MWMediaViewerRenderQpl","MWV2MediaViewerAspectRatioContainer.react","MWV2MediaViewerDimensions","MWV2MediaViewerItemImage.react","MWV2MediaViewerItemVideo.react","MWV2MediaViewerNullState.react","MessagingAttachmentType","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||(h=d("react"));b=h;var l=b.useContext,m=b.useRef;function a(a){var b=d("react-compiler-runtime").c(10),e=a.attachment,f=a.onClose;a=a.threadType;var g=e.attachmentType;if(!((i||(i=d("I64"))).equal(g,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE))||(i||(i=d("I64"))).equal(g,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE))||(i||(i=d("I64"))).equal(g,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)))){b[0]===Symbol["for"]("react.memo_cache_sentinel")?(g=k.jsx(c("MWV2MediaViewerNullState.react"),{}),b[0]=g):g=b[0];return g}b[1]===Symbol["for"]("react.memo_cache_sentinel")?(g={className:"x1ey2m1c xtijo5x x1o0tod x10l6tqk x13vifvy"},b[1]=g):g=b[1];b[2]!==f?(g=k.jsx("div",babelHelpers["extends"]({"aria-hidden":!0},g,{"data-testid":void 0,onClick:f})),b[2]=f,b[3]=g):g=b[3];b[4]!==e||b[5]!==a?(f=k.jsx(n,{attachment:e,threadType:a}),b[4]=e,b[5]=a,b[6]=f):f=b[6];b[7]!==g||b[8]!==f?(e=k.jsxs(k.Fragment,{children:[g,f]}),b[7]=g,b[8]=f,b[9]=e):e=b[9];return e}function n(a){var b=d("react-compiler-runtime").c(11),e=a.attachment,f=a.onClose;a=a.threadType;a=d("MWMediaViewerRenderQpl").useMediaViewerRenderQpl(e,a);var g=l(d("MWChatAttachmentMediaState.react").context);g=g.isImageExpanded;var h=g?d("MWV2MediaViewerDimensions").IMAGE_EXPANSION_FACTOR:1,n=m(null),o=m(null),p;b[0]!==e?(p=d("MWV2MediaViewerDimensions").getLargestAttachmentDimensions(e),b[0]=e,b[1]=p):p=b[1];p=p;var q=p.height;p=p.width;var r=e.attachmentType;b[2]!==e||b[3]!==q||b[4]!==h||b[5]!==g||b[6]!==a||b[7]!==f||b[8]!==r||b[9]!==p?(o=(i||(i=d("I64"))).equal(r,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE))||(i||(i=d("I64"))).equal(r,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE))?k.jsx(c("MWV2MediaViewerAspectRatioContainer.react"),{height:q,imageContainerRef:o,imageExpansionFactor:h,isImageExpanded:g,onClickOutsideOfChildren:f,outsideContainerRef:n,width:p,children:k.jsx(c("MWV2MediaViewerItemImage.react"),{attachment:e,imageContainerRef:o,mediaRenderQpl:a,outsideContainerRef:n})}):(i||(i=d("I64"))).equal(r,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO))?k.jsx(c("MWV2MediaViewerItemVideo.react"),{attachment:e,mediaRenderQpl:a}):null,b[2]=e,b[3]=q,b[4]=h,b[5]=g,b[6]=a,b[7]=f,b[8]=r,b[9]=p,b[10]=o):o=b[10];return o}g["default"]=a}),98);
__d("MWV2MediaViewerContent.react",["fbt","CometHideLayerOnEscape.react","CometPlaceholder.react","FDSBlurredBackgroundImage.react","I64","LSIntEnum","MWChatAttachmentMediaNavigationHotkeys.react","MWChatAttachmentMediaState.react","MWChatAttachmentMediaThumbnails.react","MWChatMediaViewerNavigationTapTarget.react","MWV2MediaViewerContainer.react","MWV2MediaViewerContext.react","MWV2MediaViewerControlsContainer.react","MWV2MediaViewerItem.react","MWV2MediaViewerNullState.react","MWXColumn.react","MWXColumnItem.react","MWXRow.react","MWXRowItem.react","MessagingAttachmentType","ReQL","ReQLSuspense","justknobx","react","react-compiler-runtime","useReStore","useShouldShowPlaybackErrorFallback","useShouldShowUnsupportedCodecFallback"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=j||(j=d("react"));b=j;var n=b.useContext,o=b.useEffect,p={mediaItem:{marginTop:"x14vqqas",marginInlineEnd:"xbmvrgn",marginBottom:"xod5an3",marginInlineStart:"x1diwwjn",$$css:!0},mediaRow:{minHeight:"x2lwn1j",$$css:!0},noOverflow:{maxWidth:"x193iq5w",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0}};function q(a){var b=d("react-compiler-runtime").c(6);a=a.attachment;var e=n(d("MWV2MediaViewerContext.react").context);e=e.getPreviewUrl;if(a==null||(k||(k=d("I64"))).equal(a.attachmentType,(l||(l=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE)))return null;var f;b[0]!==a||b[1]!==e?(f=e(a,"BlurredBackground"),b[0]=a,b[1]=e,b[2]=f):f=b[2];a=f;if(a==null)return null;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(e={className:"x1ey2m1c xtijo5x x1o0tod xuzhngd x10l6tqk x13vifvy"},b[3]=e):e=b[3];b[4]!==a?(f=m.jsx("div",babelHelpers["extends"]({},e,{children:m.jsx(c("FDSBlurredBackgroundImage.react"),{src:a})})),b[4]=a,b[5]=f):f=b[5];return f}function a(a){var b=d("react-compiler-runtime").c(69),e=a.initialAttachment,g=a.onClose;a=a.thread;var j=n(d("MWChatAttachmentMediaState.react").context),k=j.canMoveBackward,l=j.canMoveForward,r=j.card,s=j.isImageExpanded,t=j.moveBackward,u=j.moveForward;j=j.shouldTriggerLoadMore;var v=n(d("MWV2MediaViewerContext.react").context),w=v.getPreviewUrl,x=v.loadMore,y=(i||(i=c("useReStore")))(),z=e==null?void 0:e.threadKey,A=e==null?void 0:e.messageId;b[0]!==y.tables.attachments||b[1]!==A||b[2]!==z?(v=function(){return d("ReQL").fromTableDescending(y.tables.attachments).getKeyRange(z,A)},b[0]=y.tables.attachments,b[1]=A,b[2]=z,b[3]=v):v=b[3];var B;b[4]!==y||b[5]!==A||b[6]!==z?(B=[y,A,z],b[4]=y,b[5]=A,b[6]=z,b[7]=B):B=b[7];v=d("ReQLSuspense").useFirst(v,B,f.id+":114")!=null;var C=r!=null?r.attachment:v?e:void 0;b[8]!==C||b[9]!==y.tables.messages?(B=function(){return(C==null?void 0:C.messageId)==null?d("ReQL").empty():d("ReQL").fromTableAscending(y.tables.messages.index("messageId")).getKeyRange(C.messageId)},b[8]=C,b[9]=y.tables.messages,b[10]=B):B=b[10];r=C==null?void 0:C.messageId;b[11]!==y.tables.messages||b[12]!==r?(v=[r,y.tables.messages],b[11]=y.tables.messages,b[12]=r,b[13]=v):v=b[13];e=d("ReQLSuspense").useFirst(B,v,f.id+":130");var D=j;b[14]!==x||b[15]!==D?(r=function(){D&&x()},B=[D,x],b[14]=x,b[15]=D,b[16]=r,b[17]=B):(r=b[16],B=b[17]);o(r,B);v=c("useShouldShowUnsupportedCodecFallback")(C);j=c("useShouldShowPlaybackErrorFallback")(C);b[18]!==C||b[19]!==j||b[20]!==v||b[21]!==g||b[22]!==a?(r=C==null?m.jsx(c("MWV2MediaViewerNullState.react"),{}):!v&&!j?m.jsx(c("MWV2MediaViewerItem.react"),{attachment:C,onClose:g,threadType:a.threadType}):null,b[18]=C,b[19]=j,b[20]=v,b[21]=g,b[22]=a,b[23]=r):r=b[23];B=r;b[24]===Symbol["for"]("react.memo_cache_sentinel")?(j=c("justknobx")._("3491"),b[24]=j):j=b[24];v=j;b[25]!==C||b[26]!==e||b[27]!==g||b[28]!==a?(r=m.jsx(c("MWV2MediaViewerControlsContainer.react"),{attachment:C,message:e,onClose:g,thread:a}),b[25]=C,b[26]=e,b[27]=g,b[28]=a,b[29]=r):r=b[29];b[30]!==g?(j=v?null:m.jsx(d("MWChatAttachmentMediaNavigationHotkeys.react").MWChatAttachmentMediaNavigationHotkeys,{onClose:g}),b[30]=g,b[31]=j):j=b[31];b[32]!==C?(e=m.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MWV2MediaViewerContent.BlurredBackground",children:m.jsx(q,{attachment:C})}),b[32]=C,b[33]=e):e=b[33];b[34]===Symbol["for"]("react.memo_cache_sentinel")?(a=[p.mediaRow,p.noOverflow],b[34]=a):a=b[34];var E;b[35]===Symbol["for"]("react.memo_cache_sentinel")?(E=h._(/*BTDS*/"Previous photo"),b[35]=E):E=b[35];k=!k;b[36]!==s||b[37]!==t||b[38]!==k?(E=m.jsx(c("MWXRowItem.react"),{children:m.jsx(c("MWChatMediaViewerNavigationTapTarget.react"),{direction:"previous",label:E,onClick:t,shouldHide:k,shouldHideWithoutTransition:s,testid:void 0})}),b[36]=s,b[37]=t,b[38]=k,b[39]=E):E=b[39];b[40]!==B?(t=m.jsx(c("MWXRowItem.react"),{expanding:!0,verticalAlign:"stretch",xstyle:p.mediaItem,children:m.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MWV2MediaViewerContent.MediaContent",children:B})}),b[40]=B,b[41]=t):t=b[41];b[42]===Symbol["for"]("react.memo_cache_sentinel")?(k=h._(/*BTDS*/"Next photo"),b[42]=k):k=b[42];B=!l;b[43]!==s||b[44]!==u||b[45]!==B?(l=m.jsx(c("MWXRowItem.react"),{children:m.jsx(c("MWChatMediaViewerNavigationTapTarget.react"),{direction:"next",label:k,onClick:u,shouldHide:B,shouldHideWithoutTransition:s,testid:void 0})}),b[43]=s,b[44]=u,b[45]=B,b[46]=l):l=b[46];b[47]!==E||b[48]!==t||b[49]!==l?(k=m.jsx(c("MWXColumnItem.react"),{expanding:!0,verticalAlign:"center",children:m.jsxs(c("MWXRow.react"),{align:"justify",expanding:!0,paddingHorizontal:0,paddingVertical:0,spacingHorizontal:0,verticalAlign:"stretch",xstyle:a,children:[E,t,l]})}),b[47]=E,b[48]=t,b[49]=l,b[50]=k):k=b[50];b[51]!==w||b[52]!==s?(u=m.jsx(c("MWXColumnItem.react"),{children:m.jsx(c("MWChatAttachmentMediaThumbnails.react"),{getPreviewUrl:w,shouldHide:s})}),b[51]=w,b[52]=s,b[53]=u):u=b[53];b[54]!==k||b[55]!==u?(B=m.jsxs(c("MWXColumn.react"),{align:"stretch",expanding:!0,paddingHorizontal:0,verticalAlign:"space-between",children:[k,u]}),b[54]=k,b[55]=u,b[56]=B):B=b[56];b[57]!==s||b[58]!==r||b[59]!==j||b[60]!==e||b[61]!==B?(a=m.jsxs(c("MWV2MediaViewerContainer.react"),{actions:r,hideActions:s,children:[j,e,B]}),b[57]=s,b[58]=r,b[59]=j,b[60]=e,b[61]=B,b[62]=a):a=b[62];E=a;if(g!=null)if(v){b[63]!==E||b[64]!==g?(t=m.jsx(d("MWChatAttachmentMediaNavigationHotkeys.react").MWChatAttachmentMediaNavigationHotkeys,{onClose:g,children:E}),b[63]=E,b[64]=g,b[65]=t):t=b[65];return t}else{b[66]!==E||b[67]!==g?(l=m.jsx(c("CometHideLayerOnEscape.react"),{onHide:g,children:E}),b[66]=E,b[67]=g,b[68]=l):l=b[68];return l}return E}g["default"]=a}),226);
__d("MWV2MediaViewerThreadCutoverWrapper.react",["LSThreadMediaGalleryGroup","MWChatAttachmentMediaState.react","MWV2MediaViewerContext.react","emptyFunction","justknobx","react","react-compiler-runtime","useMAWLoadMoreCutoverThreadSharedAttachments","useMWMaybeInboxMediaRestoreLoop","useMWV2MediaViewerOpenDownloadUrl","useMWV2MediaViewerOpenPlayableUrl","useMWV2MediaViewerOpenPreviewUrl","useMWV2MediaViewerSecurePlayableUrl_CausesSuspense","useMWV2MediaViewerSecurePreviewUrl_CausesSuspense"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useCallback;function a(a){var b=d("react-compiler-runtime").c(27),e=a.children,f=a.initialAttachment,g=a.openThreadKey,h=a.secureThreadKey;a=a.threadType;var k;b[0]!==h||b[1]!==a?(k={threadKey:h,threadType:a},b[0]=h,b[1]=a,b[2]=k):k=b[2];c("useMWMaybeInboxMediaRestoreLoop")(k);b[3]===Symbol["for"]("react.memo_cache_sentinel")?(k={entrypoint:"media_viewer"},b[3]=k):k=b[3];var l;b[4]===Symbol["for"]("react.memo_cache_sentinel")?(l=c("justknobx")._("3233"),b[4]=l):l=b[4];h=c("useMAWLoadMoreCutoverThreadSharedAttachments")(h,g,a,k,c("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS,!1,l);g=h.attachments;a=h.onLoadMore;var m=j,n=c("useMWV2MediaViewerOpenPreviewUrl")(),o=c("useMWV2MediaViewerOpenPlayableUrl")(),p=c("useMWV2MediaViewerOpenDownloadUrl")(),q=c("useMWV2MediaViewerSecurePreviewUrl_CausesSuspense")(),r=c("useMWV2MediaViewerSecurePlayableUrl_CausesSuspense")();b[5]!==n||b[6]!==q?(k=function(a,b,c){if(!a)return"";return!m(a)?n(a,b,c):q(a,b,c)},b[5]=n,b[6]=q,b[7]=k):k=b[7];l=k;b[8]!==o||b[9]!==r?(h=function(a,b,c){if(a==null)return"";return!m(a)?o(a,b,c):r(a,b,c)},b[8]=o,b[9]=r,b[10]=h):h=b[10];k=h;b[11]!==p||b[12]!==r?(h=function(a,b,c){if(a==null)return"";return!m(a)?p(a,b,c):r(a,b,c)},b[11]=p,b[12]=r,b[13]=h):h=b[13];h=h;var s;b[14]!==g||b[15]!==e||b[16]!==k||b[17]!==l||b[18]!==f?(s=i.jsx(d("MWChatAttachmentMediaState.react").MWChatAttachmentMediaStateProviderFromAttachments,{attachments:g,getIsSecureThread:m,getPlayableUrl:k,getPreviewUrl:l,initialAttachment:f,children:e}),b[14]=g,b[15]=e,b[16]=k,b[17]=l,b[18]=f,b[19]=s):s=b[19];b[20]!==g||b[21]!==h||b[22]!==k||b[23]!==l||b[24]!==a||b[25]!==s?(e=i.jsx(d("MWV2MediaViewerContext.react").MWV2MediaViewerContextProvider,{getDownloadUrl:h,getPlayableUrl:k,getPreviewUrl:l,heroLoggingComponent:c("emptyFunction"),loadMore:a,media:g,children:s}),b[20]=g,b[21]=h,b[22]=k,b[23]=l,b[24]=a,b[25]=s,b[26]=e):e=b[26];return e}function j(a){return!((a==null?void 0:a.transportKey)==="FBBroker"||(a==null?void 0:a.transportKey)==="FBLegacyBroker")}g["default"]=a}),98);